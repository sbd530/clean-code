# 9장 단위 테스트

## 깨끗한 테스트 코드 유지하기

테스트 코드는 실제 코드 못지 않게 중요하다.

### 테스트는 유연성, 유지보수성, 재사용성을 제공한다.

코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위테스트다. 테스트 케이스가 있으면 우리는 두려울게 없다!

테스트 케이스 위에서 우리는 안심하고 아키텍쳐와 설계를 개선할 수 있다.

따라서 테스트 코드가 지저분하면 코드를 변경하는 능력이 떨어지며 코드 구조를 개선하는 능력도 떨어진다.

## 깨끗한 테스트 코드

테스트 코드는 무조건 가독성이다! 가독성을 높이려면 명료, 단순, 풍부한 표현이 필요하다.

테스트 코드도 마찬가지로 함수를 줄이고 가독성 좋은 이름을 지음으로써 깔끔하게 만들 수 있다.

BUILD-OPERATE-CHECK 패턴 (given-when-then)이 가독성이 도움이 될 수 있다. (함수명의 접두어를 given-when-then으로 하는 관례가 있다.)

## 테스트 당 assert 하나

`assert` 문이 단 하나인 함수는 결론이 하나라서 코드를 이해하기 쉽고 빠르다.

두 개 이상의 `assert`문을 분리하려하면 중복되는 코드가 많아진다.

템플릿 메서드 패턴을 사용하면 중복을 제거할 수 있다.

하지만 오히려 이것때문에 코드가 길어지고 복잡해진다면 그냥 여러개를 쓰자. 단, `assert`문을 최소화하도록 노력하자.

### 테스트 당 개념 하나

## F.I.R.S.T

- Fast : 테스트는 빨리 돌아야 한다.
- Independent : 각 테스트를 서로 의존하지 않는다.
- Repeatable : 테스트는 어떤 환경에서도 반복 가능해야 한다. 오프라인에서도 돌 수 있어야 한다.
- Self-Validating : 테스트는 불리언 값으로 결과를 내야 한다. 성공 아니면 실패.
- Timely : 테스트는 적시에 작성해야 한다. 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다.
